### Instance состоит из:
>SGA (System Global Area), которая обеспечивает коммуникацию между процессами;
бэкграундовых процессов

# Файлы базы данных Oracle

### Файлы данных (Data Files).

Все данные в базе данных Oracle сохраняются в файлах данных. Все таблицы, индексы, триггеры, последовательности, программы
на PL/SQL, представления - все это находится в файлах данных.

### Оперативные файлы журналов повтора (Online Redo Log Files).

Предназначены для записи всех изменений, выполненных над данными базы данных Oracle. Используется для хранения на диске
информации для повторного выполнения операций.

### Управляющие файлы (Control Files).

Поскольку база данных Oracle является физическим набором связанных файлов данных, то для их синхронизации и контроля
требуется особые методы. Для этих целей используются управляющие файлы.

База данных Oracle может иметь один или несколько управляющих файлов. Если имеется несколько управляющих файлов, все они
должны быть абсолютно идентичными. При каждом запуске базы данных Oracle читает информацию управляющего файла, а при
каждом изменении размещения или добавления новых файлов данных и журналов базы данных обновляет управляющий файл.

### Файлы параметров pfile, spfie (Parameter Files).

Файлы параметров используются для конфигурирования действий Oracle предже всего при старте. Для того, чтобы запустить
экземпляр базы данных, Oracle должен прочесть файл параметров и определить, какие параметры инициализации установлены для
этого экземпляра. В файле параметров содержатся многочисленные параметры и их установленные значения. Oracle считывает
файл параметров при запуске базы данных. Можно создать несколько файлов параметров, каждый будет соответствовать различным
конфигурациям экземпляра.

###### *spfile* - бинарный файл, который используется сервером Oracle при старте. ####/u01/app/oracle/product/12.2.0/ dbhome_1/dbs
###### *pfile* - текстовый файл с параметрами, будет использоваться при старте, если не будет найден spfile.

Преимущество spfile заключается в том, что при работе с базой данных, любые изменения в базе касающиеся изменения
параметра системы, автоматически записываются в данный файл. Если используется pfile, для сохранения изменений, необходимо
либо “руками вносить эти изменения” в текстовый файл, либо в консоли выполнять команды для создания данных файлов Ораклом.

### Архивные файлы журналов повтора (Archive Log Files).

Как только оперативный файл журнала повтора (Redolog) оказывается заполнен, программное обеспечение сервера Oracle
начинает запись в следующий файл. Эта операция повторяется, как следствие информация в оперативных файлах журнала
(Redolog) многократно перезаписывается.
Если необходимо сохранить историю изменений, нужно, чтобы после переключения журналов сохранялась их копия. Для этого
достаточно перевести работу базы данных в режим работы ARCHIVELOG.

Архивные файлы журналов повтора жизненно важны при восстановлении. Если часть базы данных потеряна или повреждена, то для
устранения повреждений обычно требуется несколько архивных журналов. Файлы журналов повтора должны применяться к базе
данных последовательно. Если один из архивных файлов журналов повтора пропущен, то остальные архивные файлы журналов не
могут использоваться. Храните все свои архивные файлы журналов повтора с момента выполнения последней резервной копии.
Файлы журналов постепенно накапливаются и разрастаются. Иногда необходимо их удалять. Все операции с данными файлами по
применению их к базе выполняются исключительно средствами базы данных. А копировать и переносить их при желании можно как
угодно. Бездумно удалять их руками не рекомендуется.

##### ARCHIVELOG.

Режим работы базы данных, при котором после переключения активной журнальной группы, копия журнала архивируется и
сохраняется на диск. Redo-лог журналы постепенно перезаписываются, а информация которая в них хранилась может быть
получена из архивлогов.
В режиме работы ARCHIVELOG архивные журналы накапливаются и если свободного места нет, база данных прекращает работу. Если
свободного места совсем нет, можно застрять надолго.
В режиме работы ARCHIVELOG для создания бекапа не нужно останавливать работу базы, поэтому обычно базы данных работают
именно в этом режиме.

FRA (Fast Recovery Area) -область на диске для резервных копий и архивных журналов. Впрочем совсем необязательно хранить
бекапы именно в ней. Преимущество использования - возможность ограничения использования ресурсов жестких дисков для
бекапов и архивных журналов. В настройка Oracle задается, где эта область располагается и сколько в ней может храниться
данных. Лучше под FRA не задавать максимально большое значение которое можно выделить под эту задачу, чтобы если что иметь
возможность для маневра. По хорошему, нужно мониторить свободное место в FRA. Если место закончится, сервер отановится.

### Alert log и трассировочные файлы (trace file).

При работе базы данных события и ошибки регистрируются в текстовых файлах на сервере базы данных. Файл журнала
предупреждений (alert log) нужен администратору базы данных для отслеживания важнейших действий с базой данных - наподобие
открытия и закрытия базы данных, установления параметров загрузки базы данных и переключения оперативных журналов повтора.
Также в эти файлы записываются многие ошибки базы данных для последующего расследования их причин. Любые структурные
изменения базы данных также регистрируются в файле журнала предупреждений.

##### Alert log находится:
		/u01/app/oracle/diag/rdbms/valentin/valentin/trace    ## где valentin это имя instance #####
		SQL> show parapeter diag  

### Файлы паролей (Password File).
Необязательный файл, используется для защиты информации о подключениях привилегированных пользователей. Если отсутствует,
то вы можете выполнять администрирование своей базы данных, только локально. Кроме того, с его помощью контролируется
количество привилегированных подключений для управления в одно и то же время.

# SGA (system global area).

Экземпляр БД Oracle состоит из блоков разделяемой памяти, называемых system global area (SGA) и background процессов.

SGA содержит три обязательные структуры данных:

```
Thedatabasebuffercache - содержит копии блоков данных считанные из файлов данных

Thelogbuffer - содержит данные о транзакциях которые ещё не записаны в redolog

Thesharedpool - содержит проверенные SQL выражения и кэш словаря данных, содержащий таблицы, представления и триггеры
```
    Также дополнительно могут быть:
    Largepool
    Javapool
    Streemspool

*Пользовательские сессии тоже требуют памяти на сервере. Это неразделяемая область памяти, которая
называется PGA. У каждой сессии своя PGA.*
