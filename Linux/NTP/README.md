# Установка и настройка NTP сервера и клиента

ntpd (Network Time Protocol daemon) — программа-демон, которая устанавливает и поддерживает системное время, используется для синхронизации серверами точного времени.

Программа ntpd — это демон операционной системы, который устанавливает и поддерживает системное время, синхронизированное с серверами точного времени. 

## Настройка сервера

#### Устанавливаем ntp сервер следующей командой:
```

# yum install ntp
```
#### Далее необходимо выбрать pool с которым будет синхронизироваться время например с сайта :
```

https://www.pool.ntp.org/en/
```
#### Откройте основной конфигурационный файл для редактирования списка серверов */etc/ntp.conf* и нужно заменить пулы на выбранные ранее:
```

$ vim /etc/ntp.conf
[...]
server 0.ru.pool.ntp.org
server 1.ru.pool.ntp.org
server 2.ru.pool.ntp.org
server 3.ru.pool.ntp.org
[...]

Кроме того, необходимо позволить клиентам из вашей сети синхронизировать время с сервером. Для этого добавьте следующую строку в файл конфигурации NTP, где  есть ограничения управления. Замените данный IP и маску на Вашу, соответственно:
 restrict 192.168.1.0 netmask 255.255.255.0 nomodify notrap
 ```


#### Добавление правил в Firewall (при необходимости):
```

# firewall-cmd --add-service=ntp --permanent
# firewall-cmd --reload
```

запуск NTP демона и добавление в автозагрузку:
```

# systemctl start ntpd - старт сервера
# systemctl enable ntpd - добавление в автозагрузку
```


## Настройка клиента

#### Устанавливаем ntp сервер следующей командой:
```

# yum install ntp
```

###### В настройка /etc/ntp.conf в качестве сервера оставляем только наш локальный сервер, например:

```
server 192.168.1.3

Остальные pool и server удаляем или комментируем.

```

###### Перезапускаем NTP:
```

systemctl restart ntpd
```
#### Клиент настроен
